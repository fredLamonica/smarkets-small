<div class="modal-header">
  <div class="modal-title" id="modal-basic-title">
    {{
      cotacaoRodadaPropostaMotivoDesclassificacao?.idCotacaoRodadaPropostaMotivoDesclassificacao
        ? 'Visualizar '
        : 'Incluir '
    }}
    Motivo de Desclassificação
  </div>
  <button type="button" class="close" aria-label="Close" (click)="cancelar()">
    <i class="fas fa-times"></i>
  </button>
</div>
<div class="modal-body">
  <form [formGroup]="form">
    <div class="row">
      <div class="form-group col-lg-12 required">
        <label for="motivoDesclassificacao">Motivo de Desclassificação</label>
        <input
          type="text"
          class="form-control"
          [value]="this.motivoDesclassificacao?.descricao"
          *ngIf="this.cotacaoRodadaPropostaMotivoDesclassificacao.situacao"
          readonly
        />
        <ng-select
          [items]="motivosDesclassificacao"
          bindLabel="descricao"
          bindValue="idMotivoDesclassificacao"
          name="motivoDesclassificacao"
          formControlName="idMotivoDesclassificacao"
          [class.invalid]="
            form.controls.idMotivoDesclassificacao.invalid &&
            form.controls.idMotivoDesclassificacao.dirty
          "
          *ngIf="!this.cotacaoRodadaPropostaMotivoDesclassificacao.situacao"
        >
        </ng-select>
        <!-- [compareWith]="compareMotivosDesclassificacao" -->
        <!-- (change)="onChange($event)" -->
        <span
          class="invalid"
          *ngIf="
            form.controls.idMotivoDesclassificacao.invalid &&
            form.controls.idMotivoDesclassificacao.dirty
          "
          >Preenchimento obrigatório</span
        >
      </div>
      <div class="form-group col-lg-12 required">
        <label for="exampleFormControlTextarea1">Justificativa</label>
        <textarea
          class="form-control required"
          id="justificativa"
          rows="3"
          formControlName="justificativa"
          [class.invalid]="form.controls.justificativa.invalid && form.controls.justificativa.dirty"
        ></textarea>
        <span
          class="invalid"
          *ngIf="form.controls.justificativa.invalid && form.controls.justificativa.dirty"
          >Preenchimento obrigatório</span
        >
      </div>
    </div>
    <div
      class="row"
      *ngIf="
        cotacaoRodadaPropostaMotivoDesclassificacao?.idCotacaoRodadaPropostaMotivoDesclassificacao
      "
    >
      <div class="form-group col-lg-2">
        <label for="Nome">ID: </label>
        <input
          type="text"
          class="form-control"
          [value]="this.cotacaoRodadaPropostaMotivoDesclassificacao?.usuario?.idUsuario"
          readonly
        />
      </div>
      <div class="form-group col-lg-7">
        <label for="Nome">Nome Usuário: </label>
        <input
          type="text"
          class="form-control"
          [value]="this.cotacaoRodadaPropostaMotivoDesclassificacao?.usuario?.pessoaFisica?.nome"
          readonly
        />
      </div>
      <div class="form-group col-lg-3">
        <label for="Nome">Data Registro: </label>
        <input
          type="text"
          class="form-control"
          [value]="
            formatarData(
              this.cotacaoRodadaPropostaMotivoDesclassificacao?.dataAlteracao
                ? this.cotacaoRodadaPropostaMotivoDesclassificacao?.dataAlteracao
                : this.cotacaoRodadaPropostaMotivoDesclassificacao?.dataInclusao
            )
          "
          readonly
        />
      </div>
    </div>
  </form>
</div>
<div class="modal-footer">
  <button type="button" (click)="cancelar()" class="btn btn-outline-primary">
    <i class="fas fa-ban"></i> Cancelar
  </button>
  <button
    type="button"
    (click)="salvar()"
    *ngIf="!this.cotacaoRodadaPropostaMotivoDesclassificacao.situacao"
    class="btn btn-primary"
  >
    <i class="fas fa-save"></i> Salvar
  </button>
</div>
