<div class="modal-header">
  <div class="modal-title" id="modal-basic-title">Selecionar fornecedor</div>
  <button type="button" class="close" aria-label="Close" (click)="cancelar()">
    <i class="fas fa-times"></i>
  </button>
</div>
<div class="modal-body">
  <div class="row">
    <div class="col-8 col-lg-10">
      <input-busca
        placeholder="Buscar por CNPJ, Razão Social, Código ERP ou Nome Fantasia..."
        (buscar)="buscar($event)"
      ></input-busca>
    </div>
    <div class="col-4 col-lg-2">
      <ng-select
        [items]="estados"
        bindLabel="abreviacao"
        bindValue="idEstado"
        [(ngModel)]="termoEstado"
      ></ng-select>
    </div>
    <div class="col-12 mt-3">
      <custom-table
        classes="table-striped table-sm"
        [settings]="settings"
        [source]="fornecedores"
        (select)="selecao($event)"
        (sort)="ordenar($event)"
      ></custom-table>
      <pager
        size="sm"
        [page]="pagina"
        [total-pages]="totalPaginas"
        [records-per-page]="registrosPorPagina"
        (pagination)="paginacao($event)"
      ></pager>
    </div>
    <div class="form-group required col-12 mt-3">
      <label for="categoriasSelecionadas">
        Vincular fornecedor selecionado para a(s) categoria(s)
      </label>
      <ng-select
        name="categoriasSelecionadas"
        [(ngModel)]="categoriasSelecionadas"
        loadingText="buscando..."
        [multiple]="true"
      >
        <ng-option [value]="categoria" *ngFor="let categoria of categoriasProduto"
          >{{ categoria.nome }}
        </ng-option>
      </ng-select>
      <span class="invalid" *ngIf="!categoriasSelecionadas || !categoriasSelecionadas.length">
        Preenchimento obrigatório
      </span>
    </div>
  </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-outline-secondary" (click)="cancelar()">Cancelar</button>
  <button
    type="button"
    class="btn btn-outline-primary"
    [class.disabled]="!selecionado"
    (click)="confirmar()"
  >
    Confirmar
  </button>
</div>
