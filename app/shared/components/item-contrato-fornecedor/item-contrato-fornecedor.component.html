<div class="card catalogo">
    <div class="container-imagem"
      (click)="exibirDetalhesCatalogo(item.contratoCatalogoItem.idContratoCatalogoItem)">
      <img
        class="imagem"
        [src]="item?.contratoCatalogoItem?.produto?.imagens?.length ? (item?.contratoCatalogoItem?.produto?.imagens)[0].url : './../../../../assets/img/produtos/default.png'"
        [alt]="item?.contratoCatalogoItem?.produto?.descricao | uppercase" />
    </div>
    <div class="card-body p-3">
      <div class="container-descricao">
        <div class="row ">
          <div class="col">
            <span
              class="mb-0 descricao font-weight-bold d-block text-uppercase"
              data-toggle="tooltip"
              data-placement="bottom"
              [title]="item?.contratoCatalogoItem?.produto?.descricao | uppercase"
              (click)="exibirDetalhesCatalogo(item.contratoCatalogoItem.idContratoCatalogoItem)"
              role="button">
              {{ item?.contratoCatalogoItem?.produto?.descricao | slice:0:50}}
              {{ item?.contratoCatalogoItem?.produto?.descricao.length > 50 ? '...' : ''}}
            </span>
          </div>
        </div>
        <div class="marca text-truncate">
          <span>Marca:</span>
          <span
            class="text-uppercase"
            [title]="item?.contratoCatalogoItem?.marca ? item.contratoCatalogoItem.marca.nome : 'Sem preferência' | uppercase">
            {{ item?.contratoCatalogoItem?.marca ? item.contratoCatalogoItem.marca.nome : 'Sem preferência' }}
          </span>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col">
          <h3 class="mb-0 valor font-weight-bold ">
            {{ item?.contratoCatalogoItem?.valor | customCurrency: item?.contratoCatalogoItem?.moeda:null:'symbol' }}
          </h3>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col align-content-center">
          <p class="mb-0">Mín.|Qtde.</p>
          <input-number-min-value
            [disabled]="true"
            [(ngModel)]="quantidade"
            [min]="item.contratoCatalogoItem?.loteMinimo"
            [max]="maxQuant"
            [allowDecimal]="item?.contratoCatalogoItem?.produto?.unidadeMedida?.permiteQuantidadeFracionada"
            >
          </input-number-min-value>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <p class="mb-0">
            Un. de Medida: {{ item.contratoCatalogoItem?.produto?.unidadeMedida?.sigla }}
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <p class="mb-0">
            Frete: {{ TipoFrete[item?.contratoCatalogoItem?.frete].toUpperCase() }}
            <button
              type="button"
              class="btn btn-icon btn-sm p-0"
              [ngbTooltip]="tipContent"
              placement="top"
              tooltipClass="tooltip-light tooltip-estados-atendimento">
              <i class="icone-estados-atendimento fas fa-info-circle"></i>
            </button>
          </p>
        </div>
        <div class="col text-right">
          <p class="mb-0">{{ prazoEntrega(item) }}</p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <p class="mb-0">
            Faturamento Mínimo
            <button
              type="button"
              class="btn btn-icon btn-sm p-0"
              [ngbTooltip]="faturamentoTipContent"
              placement="top"
              tooltipClass="tooltip-light tooltip-estados-atendimento">
              <i class="icone-estados-atendimento fas fa-info-circle"></i>
            </button>
          </p>
        </div>
      </div>
    </div>
</div>
<ng-template #tipContent>
  <div style="text-align: left">
    <strong>Estados de Atendimento:</strong>
    <p
      *ngIf="!item?.contratoCatalogoItem?.estadosItem || item?.contratoCatalogoItem?.estadosItem.length === 0">
      Nenhum estado definido
    </p>
    <div *ngFor="let estadoItem of item?.contratoCatalogoItem?.estadosItem">
      <span class="abreviacao-estado">{{ estadoItem.estado.abreviacao }}:&nbsp;</span>
      <strong>
        {{ estadoItem.prazoEntregaDias }}&nbsp;
        {{ (estadoItem.prazoEntregaDias > 1 ? 'dias úteis' : 'dia útil') }}
      </strong>
    </div>
  </div>
</ng-template>
<ng-template #faturamentoTipContent>
  <div style="text-align: left">
    <strong>Estados de Atendimento:</strong>
    <p
      *ngIf="!item?.contratoCatalogoItem?.faturamento || item?.contratoCatalogoItem?.faturamento.length === 0">
      Nenhum estado definido
    </p>
    <div *ngFor="let faturamento of item?.contratoCatalogoItem?.faturamento">
      <span class="abreviacao-estado">{{ faturamento.estado.abreviacao }}:&nbsp;</span>
      <strong>
        {{ faturamento.valorMinimoPedido | customCurrency: item?.contratoCatalogoItem?.moeda:null:'symbol' }};
      </strong>
    </div>
  </div>
</ng-template>
